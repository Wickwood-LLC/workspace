<?php

use Drupal\Core\Entity\FieldableEntityInterface;
use Drupal\Core\Field\FieldStorageDefinitionInterface;
use Drupal\workspace\Pointer;

/**
 * Implements hook_ENTITY_TYPE_insert()
 *
 * @param \Drupal\multiversion\Entity\WorkspaceInterface $workspace
 */
function workspace_workspace_insert(\Drupal\multiversion\Entity\WorkspaceInterface $workspace) {
  $pointer = new Pointer('workspace:' . $workspace->id(), $workspace->label(), ['workspace' => $workspace->id()]);
  \Drupal::service('workspace.pointer')->add($pointer);
}

function workspace_pointer_allowed_values(FieldStorageDefinitionInterface $definition, FieldableEntityInterface $entity = NULL, &$cacheable) {
  return \Drupal\workspace\Entity\Replication::getPointerAllowedValues($definition, $entity, $cacheable);
}